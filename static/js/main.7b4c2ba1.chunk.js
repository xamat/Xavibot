(this["webpackJsonpchatbot-ui"]=this["webpackJsonpchatbot-ui"]||[]).push([[0],{10:function(t,e,a){t.exports=a(27)},19:function(t,e,a){},20:function(t,e,a){},27:function(t,e,a){"use strict";a.r(e);var s=a(2),o=a.n(s),n=a(8),i=a.n(n);a(19),a(20),a(21);var r={threadId:null,assistantId:null,setThreadId:function(t){this.threadId=t},setAssistantId:function(t){this.assistantId=t}},c=a(5),d=a.n(c);var h={initialMessages:[Object(c.createChatBotMessage)(o.a.createElement("div",{dangerouslySetInnerHTML:{__html:'This is a chatbot designed to respond as Xavi Amatriain.<br> \n        <p>For more details on how this chatbot was created, read the <a href="https://amatria.in/blog/aidevelopment" target="_blank" rel="noopener noreferrer">blogpost</a>.It provides\n        a link to the codebase in Github among other things.</p>\n        All that being said, how can I help you today, human? '}}))],botName:"XaviBot",customStyles:{botMessageBox:{backgroundColor:"#376B7E"},chatButton:{backgroundColor:"#5ccc9d"}},state:{gist:"",infoBox:""},widgets:[]};var l=class{constructor(t,e){this.actionProvider=t}parse(t){const e=r.threadId,a=r.assistantId,s=t.toLowerCase();s.includes("hello")?this.actionProvider.greet():s.includes("help")?this.actionProvider.handleHelp():this.actionProvider.sendMessageToAssistantBackend(t,e,a)}},g=a(28);var u=class{constructor(t,e,a){this.createChatBotMessage=t,this.setState=e,this.createClientMessage=a,this.sendMessageToBackend=this.sendMessageToBackend.bind(this),this.sendMessageToAssistantBackend=this.sendMessageToAssistantBackend.bind(this)}greet(){const t=this.createChatBotMessage("Hello! How can I help you?");this.updateChatbotState(t)}handleHelp(){const t=this.createChatBotMessage("Here's some help...");this.updateChatbotState(t)}handleUnknown(){const t=this.createChatBotMessage("Sorry, I didn't understand that.");this.updateChatbotState(t)}async sendMessageToBackend(t){const e="http://localhost:3001";console.log("Calling server at:",e);try{const a=(await g.a.post("".concat(e,"/chat"),{message:t})).data.message;this.addMessageToChat(a)}catch(a){console.error("Error sending message to backend:",a),console.log("Error"),this.addMessageToChat("Caught Exception: Error sending message to backend")}}async sendMessageToAssistantBackend(t,e,a){console.log("Sending Message to Assistant Backend with threaId, assistantId:",e,a);try{const s=(await g.a.post("".concat("http://localhost:3001","/chatWithAssistant"),{message:t,threadId:e,assistantId:a})).data.message;this.addMessageToChat(s)}catch(s){console.error("Error sending message to backend:",s),console.log("Error"),this.addMessageToChat("Caught Exception: Error sending message to backend")}}addMessageToChat(t){const e=this.createChatBotMessage(t);this.updateChatbotState(e)}updateChatbotState(t){this.setState(e=>({...e,messages:[...e.messages,t]}))}};var p=function(){return Object(s.useEffect)(()=>{(async()=>{try{const t="http://localhost:3001",e=await g.a.post("".concat(t,"/get-assistant"));r.setAssistantId(e.data),console.log("Chatbot Initialized with AssistantId:",r.assistantId);const a=await g.a.post("".concat(t,"/create-thread"));r.setThreadId(a.data),console.log("Chatbot Initialized with ThreadId:",r.threadId)}catch(t){console.error("Error initializing chatbot:",t)}})()},[]),o.a.createElement(d.a,{config:h,headerText:"Xavibot",actionProvider:u,messageParser:l})};var b=function(){return console.log("APP is called"),o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement(p,null)))};i.a.createRoot(document.getElementById("root")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null)))}},[[10,1,2]]]);
//# sourceMappingURL=main.7b4c2ba1.chunk.js.map